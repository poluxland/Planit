newSubTaskBtn = document.querySelector('.submit-btn')
newSubTaskForm = document.querySelector('.submit-form')

function addSubTask(taskHTML) {
  newSubTaskBtn.parentElement.firstElementChild.insertAdjacentHTML('beforeend', taskHTML);
}

// -------------- [ SET CLASS ASSIGNMENT FOR GRAB ] ------------------
<% if @subtask.errors.any? %>
newSubTaskBtn.classList.toggle('active')
newSubTaskBtn.classList.toggle('submit-btn')

newSubTaskForm.classList.toggle('active')
newSubTaskForm.classList.toggle('submit-form')
<% else %>
addSubTask('<%= j render "subtasks/subtask", task: @task, subtask: @subtask %>');
newSubTaskBtn.classList.toggle('active')
newSubTaskBtn.classList.toggle('submit-btn')
newSubTaskForm.classList.toggle('active')
newSubTaskForm.classList.toggle('submit-form')
<% end %>

function refreshProgressMessage(innerHTML) {
  progressMessage = document.querySelector('.progress-message[data-task-id="<%= @task.id %>"]');
  progressMessage.innerHTML = innerHTML
}

function refreshtaskOverview(innerHTML) {
  taskOverview = document.querySelector('.overview-grab');
  taskOverview.innerHTML = innerHTML
}

refreshtaskOverview(`<%= render 'tasks/overview', trip: @trip %>`)
refreshProgressMessage(`<%= render "tasks/progress_message", task: @task %>`)
