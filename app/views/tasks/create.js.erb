newTaskBtn = document.querySelector('.new-task-btn')
newTaskForm = document.querySelector('.new-task-form')

function addTask(taskHTML) {
  const tasks = document.querySelector('.tasks-col');
  tasks.insertAdjacentHTML('beforeend', taskHTML);
}

<% if @task.errors.any? %>
newTaskBtn.classList.toggle('active')
newTaskForm.classList.toggle('active')
<% else %>
addTask('<%= j render "tasks/task", task: @task %>');
newTaskBtn.classList.toggle('active')
newTaskForm.classList.toggle('active')
<% end %>

function refreshProgressMessage(innerHTML) {
  progressMessage = document.querySelector('.progress-message[data-task-id="<%= @task.id %>"]');
  console.log(progressMessage)
  progressMessage.innerHTML = innerHTML
}
refreshProgressMessage(`<%= render "tasks/progress_message", task: @task %>`)
