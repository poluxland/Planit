

<div class="container">
  <div
  id="map"
  style="width: 100%;
  position: absolute;
  height: 300px;
  top: 0px;
  left: 0px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  ></div>
  <div class="tasks row justify-content-center">
    <div class="col-12 col-lg-8">
      <% @trip.tasks.each do |task| %>
      <div class="task-container">

        <div class="task-card">
          <div class='task-header d-flex'>
            <div class='check'>
              <%= link_to task_path(task, ajax: true), class: 'check-btn', remote: true, method: :patch do %>
              <i class='far fa-<%= task.status == true ? 'check-' : '' %>square' data-task-id = '<%= task.id %>'></i>
              <% end %>
            </div>
            <div class='info'>
              <h2><%= task.name %></h2>
              <p><%= task.description %></p>
            </div>
          </div>
          <div class="task-buttons">
            <%= link_to edit_task_path(task), class: 'btn' do %>
            <i class="far fa-edit"></i>
            <% end %>
            <%= link_to task_path(task), class: 'btn', method: :delete, data: { confirm: "Are you sure?" } do %>
            <i class="far fa-trash-alt"></i>
            <% end %>
          </div>
        </div>

        <div class="subtasks">
          <% task.subtasks.each do |subtask| %>

          <div class="subtask-card">
            <div class='subtask-header d-flex'>
              <div class='check'>
                <%= link_to subtask_path(subtask, ajax: true), class: 'check-btn', remote: true, method: :patch do %>
                <i class='far fa-<%= subtask.status == true ? 'check-' : '' %>square' data-subtask-id = '<%= subtask.id %>'></i>
                <% end %>
              </div>
              <div class='info'>
                <h2><%= subtask.name %></h2>
                <p><%= subtask.description %></p>
              </div>
            </div>
            <div class="subtask-buttons">
              <%= link_to edit_subtask_path(subtask), class: 'btn' do %>
              <i class="far fa-edit"></i>
              <% end %>
              <%= link_to subtask_path(subtask), class: 'btn', method: :delete, data: { confirm: "Are you sure?" } do %>
              <i class="far fa-trash-alt"></i>
              <% end %>
            </div>
          </div>
          <% end %>
          <%= link_to new_task_subtask_path(task), class: 'btn' do %>
          <div class="d-flex align-items-center text-center"><i class="fas fa-plus py-auto"></i><h2 class='btn-lbl pl-2'>Add Subtask</h2></div>
          <% end %>
        </div>

        <div class="task-down">
          <i class="first fas fa-chevron-down"></i>
          <i class="second fas fa-chevron-down"></i>
        </div>

      </div>
      <% end %>
      <%= link_to new_trip_task_path(@trip), id: 'new-task-btn', class: 'btn btn-light' do %>
      <div class="d-flex align-items-center text-center"><i class="fas fa-plus py-auto"></i><h2 class='btn-lbl pl-2'>Add Task</h2></div>
      <% end %>
    </div>
  </div>
</div>
<!--   -->

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>

